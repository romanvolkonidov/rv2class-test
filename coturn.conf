# Coturn TURN/STUN Server Configuration
# For WebRTC video/audio relay

# Listening port for STUN/TURN
listening-port=3478

# TLS listening port
tls-listening-port=5349

# Relay ports range
min-port=49152
max-port=65535

# Listening IPs (0.0.0.0 for all interfaces)
listening-ip=0.0.0.0
relay-ip=0.0.0.0

# External IP - will be set via environment variable
# external-ip will be configured at runtime

# Realm for TURN server
realm=rv2class.com

# Server name
server-name=rv2class-turn

# Use fingerprint in TURN messages
fingerprint

# Use long-term credentials
lt-cred-mech

# Static user credentials
# In production, use: turnadmin -a -u <username> -r rv2class.com -p <password>
# For now, using static credentials (change in production!)
user=rvclass:rvclasspass2024

# SSL/TLS certificates (optional, for secure connections)
# cert=/etc/coturn/turn_server_cert.pem
# pkey=/etc/coturn/turn_server_pkey.pem

# Deny all TURN requests except from specific origins (optional)
# allowed-peer-ip=0.0.0.0-255.255.255.255

# Enable verbose logging (disable in production)
verbose

# Log file
log-file=/var/log/turnserver.log

# Do not use multicast
no-multicast-peers

# Disable UDP relay endpoints
# no-udp-relay

# Disable TCP relay endpoints  
# no-tcp-relay

# Mobility with ICE (MICE)
mobility

# Allocate IP address
# no-cli

# Security options
# Deny connections to private IP ranges
no-loopback-peers
no-multicast-peers

# Prometheus metrics (optional)
# prometheus

# Max allowed bandwidth per session (in KB/s)
# max-bps=1000000

# Total bandwidth limit (in KB/s)
# total-quota=100000

# Ban private IP ranges from relay
denied-peer-ip=0.0.0.0-0.255.255.255
denied-peer-ip=10.0.0.0-10.255.255.255
denied-peer-ip=100.64.0.0-100.127.255.255
denied-peer-ip=127.0.0.0-127.255.255.255
denied-peer-ip=169.254.0.0-169.254.255.255
denied-peer-ip=172.16.0.0-172.31.255.255
denied-peer-ip=192.0.0.0-192.0.0.255
denied-peer-ip=192.0.2.0-192.0.2.255
denied-peer-ip=192.88.99.0-192.88.99.255
denied-peer-ip=192.168.0.0-192.168.255.255
denied-peer-ip=198.18.0.0-198.19.255.255
denied-peer-ip=198.51.100.0-198.51.100.255
denied-peer-ip=203.0.113.0-203.0.113.255
denied-peer-ip=240.0.0.0-255.255.255.255

# Database for long-term credentials (optional)
# Use PostgreSQL or Redis in production
# psql-userdb="host=postgres dbname=coturn user=coturn password=password"
