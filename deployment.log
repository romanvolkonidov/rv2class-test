[H[2J[3J
\033[0;36m╔═══════════════════════════════════════════════════════════════╗\033[0m
\033[0;36m║\033[0m              \033[0;35mRV2Class Complete Deployment\033[0m                 \033[0;36m║\033[0m
\033[0;36m║\033[0m         \033[0;34mFresh Server + Custom Jitsi Build\033[0m               \033[0;36m║\033[0m
\033[0;36m╚═══════════════════════════════════════════════════════════════╝\033[0m

\033[1;33mServer Configuration:\033[0m
  IP:       108.61.245.179
  Domain:   app.rv2class.com
  Email:    romanvolkonidov@gmail.com

[1;33m[!][0m This will COMPLETELY RESET and redeploy your server!


[0;36m╔════════════════════════════════════════════════════════════╗[0m
[0;36m║[0m [0;35mSTEP 1: Local Prerequisites[0m
[0;36m╚════════════════════════════════════════════════════════════╝[0m

[0;34m[INFO][0m Checking for sshpass...
[0;32m[✓][0m sshpass ready

[0;36m╔════════════════════════════════════════════════════════════╗[0m
[0;36m║[0m [0;35mSTEP 2: Preparing Server Setup Script[0m
[0;36m╚════════════════════════════════════════════════════════════╝[0m

[0;32m[✓][0m Server setup script created

[0;36m╔════════════════════════════════════════════════════════════╗[0m
[0;36m║[0m [0;35mSTEP 3: Running Server Setup[0m
[0;36m╚════════════════════════════════════════════════════════════╝[0m

[0;34m[INFO][0m Uploading setup script to server...
[0;34m[INFO][0m Executing setup on server (this will take 10-15 minutes)...
🚀 Starting server setup...
📝 Setting hostname...
📝 Configuring /etc/hosts...
📦 Updating system packages...
W: http://packages.prosody.im/debian/dists/jammy/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
📦 Installing dependencies...
📦 Installing Node.js...
[38;5;79m2025-10-22 20:58:02 - Installing pre-requisites[0m

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Hit:1 http://ubuntu.mirror.constant.com jammy InRelease
Hit:2 http://ubuntu.mirror.constant.com jammy-updates InRelease
Hit:3 http://ubuntu.mirror.constant.com jammy-backports InRelease
Hit:4 http://ubuntu.mirror.constant.com jammy-security InRelease
Hit:5 http://archive.ubuntu.com/ubuntu jammy InRelease
Hit:6 http://archive.ubuntu.com/ubuntu jammy-updates InRelease
Hit:7 http://archive.ubuntu.com/ubuntu jammy-backports InRelease
Hit:8 http://archive.ubuntu.com/ubuntu jammy-security InRelease
Hit:9 https://deb.nodesource.com/node_18.x nodistro InRelease
Hit:10 http://packages.prosody.im/debian jammy InRelease
Hit:11 https://download.jitsi.org stable/ InRelease
Reading package lists...
Building dependency tree...
Reading state information...
9 packages can be upgraded. Run 'apt list --upgradable' to see them.
W: http://packages.prosody.im/debian/dists/jammy/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Reading package lists...
Building dependency tree...
Reading state information...
ca-certificates is already the newest version (20240203~22.04.1).
curl is already the newest version (7.81.0-1ubuntu1.21).
gnupg is already the newest version (2.2.27-3ubuntu2.4).
apt-transport-https is already the newest version (2.4.14).
0 upgraded, 0 newly installed, 0 to remove and 9 not upgraded.

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Hit:1 http://ubuntu.mirror.constant.com jammy InRelease
Hit:2 http://ubuntu.mirror.constant.com jammy-updates InRelease
Hit:3 http://ubuntu.mirror.constant.com jammy-backports InRelease
Hit:4 http://ubuntu.mirror.constant.com jammy-security InRelease
Hit:5 http://archive.ubuntu.com/ubuntu jammy InRelease
Hit:6 http://archive.ubuntu.com/ubuntu jammy-updates InRelease
Hit:7 http://archive.ubuntu.com/ubuntu jammy-backports InRelease
Hit:8 http://archive.ubuntu.com/ubuntu jammy-security InRelease
Hit:9 https://deb.nodesource.com/node_18.x nodistro InRelease
Hit:10 http://packages.prosody.im/debian jammy InRelease
Hit:11 https://download.jitsi.org stable/ InRelease
Reading package lists...
Building dependency tree...
Reading state information...
9 packages can be upgraded. Run 'apt list --upgradable' to see them.
W: http://packages.prosody.im/debian/dists/jammy/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
[1;34m2025-10-22 20:58:15 - Repository configured successfully.[0m
[38;5;79m2025-10-22 20:58:15 - To install Node.js, run: apt install nodejs -y[0m
[38;5;79m2025-10-22 20:58:15 - You can use N|solid Runtime as a node.js alternative[0m
[1;32m2025-10-22 20:58:15 - To install N|solid Runtime, run: apt install nsolid -y 
[0m
🔥 Configuring firewall...
Backing up 'user.rules' to '/etc/ufw/user.rules.20251022_205817'
Backing up 'before.rules' to '/etc/ufw/before.rules.20251022_205817'
Backing up 'after.rules' to '/etc/ufw/after.rules.20251022_205817'
Backing up 'user6.rules' to '/etc/ufw/user6.rules.20251022_205817'
Backing up 'before6.rules' to '/etc/ufw/before6.rules.20251022_205817'
Backing up 'after6.rules' to '/etc/ufw/after6.rules.20251022_205817'

Default incoming policy changed to 'deny'
(be sure to update your rules accordingly)
Default outgoing policy changed to 'allow'
(be sure to update your rules accordingly)
Rules updated
Rules updated (v6)
Rules updated
Rules updated (v6)
Rules updated
Rules updated (v6)
Rules updated
Rules updated (v6)
Rules updated
Rules updated (v6)
Rules updated
Rules updated (v6)
Firewall is active and enabled on system startup
📦 Installing Jitsi Meet...
